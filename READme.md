# Лабораторна робота: Паралельне виконання fn1 та fn2 (Java, сокети)

## Опис

Головний компонент **Mn** керує виконанням двох незалежних обчислень:

- **Fn1(x)**: обчислює першу функцію.
- **Fn2(x)**: обчислює другу функцію.

Mn приймає аргумент `x`, запускає обчислення у двох окремих процесах, отримує результати через сокети та виводить:

- суму результатів, якщо обидві функції успішні;
- повідомлення про помилку або таймаут у випадку невдачі.

---

## Структура проекту

```
Mn.java     — головний процес (керує обчисленням)
Fn1.java    — клієнтська функція fn1(x)
Fn2.java    — клієнтська функція fn2(x)
```

---

## Як запускати

### 1. Компіляція

У терміналі VS Code або командному рядку:

```bash
javac Mn.java Fn1.java Fn2.java
```

### 2. Запуск Mn

Mn повинен запускатися **першим**, він слухає порти:

- 5001 — для Fn1
- 5002 — для Fn2

```bash
java Mn
```

Програма попросить ввести `x`.

### 3. Запуск Fn1 та Fn2

Відкрий два нові термінали:

```bash
java Fn1
java Fn2
```

Fn1 і Fn2 підключаться до Mn, отримають `x`, обчислять свої функції та надішлють результат.

---

## Логіка обчислень

- **Fn1**: `result = x * x`
  - Симуляція зависання при `x = 5`
  - Можливий штучний FAIL при `x = 13`

- **Fn2**: `result = 15 / x`
  - Помилка при `x = 0` (ділення на нуль)
  - Можливе зависання для тесту таймауту

---

## Таймаути та ручне скасування

Mn підтримує:

- **Таймаут** очікування результату (`TIMEOUT_MS`)
- **Ручне скасування** через консоль (під час таймауту можна обрати продовжити, чекати далі або скасувати обчислення)

---

## Можливі помилки

| Помилка | Опис |
|---------|------|
| `Cannot connect Fn1 / Fn2` | Fn1/Fn2 ще не запущені або порти зайняті |
| `Division by zero` | Fn2 отримав `x = 0` |
| `Artificial FAIL` | Fn1 отримав `x = 13` для тесту помилки |
| `Timeout` | Обчислення зайняло більше `TIMEOUT_MS` |
| `Partial / Full failure` | Одне або обидва обчислення не завершились успішно |

---

## Вивід результату

- **Успіх:**  
```
Result: fn1 + fn2 = 128
```

- **Часткова або повна невдача:**  
```
Result is undefined: some computations failed.
```

---

## Очищення ресурсів

Mn та обидва клієнти коректно закривають:

- сокети,
- потоки вводу/виводу,
- ExecutorService (для Mn),
- Scanner (для Mn).

---

## Примітки

- Порядок запуску важливий: **Mn → Fn1 → Fn2**
- Можна тестувати зависання або помилки, вводячи `x = 0`, `x = 5`, `x = 13`
- Використовується простий патерн **Manager/Worker** через TCP сокети
